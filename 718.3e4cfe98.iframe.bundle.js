"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[718],{"../node_modules/.pnpm/@lexical+react@0.15.0_react-dom@18.3.1_react@18.3.1_yjs@13.6.15/node_modules/@lexical/react/LexicalNestedComposer.prod.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>f});var _lexical_react_LexicalCollaborationContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../node_modules/.pnpm/@lexical+react@0.15.0_react-dom@18.3.1_react@18.3.1_yjs@13.6.15/node_modules/@lexical/react/LexicalCollaborationContext.prod.mjs"),_lexical_react_LexicalComposerContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../node_modules/.pnpm/@lexical+react@0.15.0_react-dom@18.3.1_react@18.3.1_yjs@13.6.15/node_modules/@lexical/react/LexicalComposerContext.prod.mjs"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");var c=function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}((function(e){const t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));function p(e){const t=e.transform();return null!==t?new Set([t]):new Set}function f({initialEditor:s,children:f,initialNodes:d,initialTheme:u,skipCollabChecks:m}){const h=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),x=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_lexical_react_LexicalComposerContext__WEBPACK_IMPORTED_MODULE_1__.Gu);null==x&&c(9);const[_,{getTheme:g}]=x,v=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>{const e=u||g()||void 0,t=(0,_lexical_react_LexicalComposerContext__WEBPACK_IMPORTED_MODULE_1__.Mx)(x,e);if(void 0!==e&&(s._config.theme=e),s._parentEditor=_,d)for(let e of d){let t=null,r=null;if("function"!=typeof e){const o=e;e=o.replace,t=o.with,r=o.withKlass||null}const o=s._nodes.get(e.getType());s._nodes.set(e.getType(),{exportDOM:o?o.exportDOM:void 0,klass:e,replace:t,replaceWithKlass:r,transforms:p(e)})}else{const e=s._nodes=new Map(_._nodes);for(const[t,r]of e)s._nodes.set(t,{exportDOM:r.exportDOM,klass:r.klass,replace:r.replace,replaceWithKlass:r.replaceWithKlass,transforms:p(r.klass)})}return s._config.namespace=_._config.namespace,s._editable=_._editable,[s,t]}),[]),{isCollabActive:w,yjsDocMap:b}=(0,_lexical_react_LexicalCollaborationContext__WEBPACK_IMPORTED_MODULE_2__.k)(),M=m||h.current||b.has(s.getKey());return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{M&&(h.current=!0)}),[M]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>_.registerEditableListener((e=>{s.setEditable(e)}))),[s,_]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_lexical_react_LexicalComposerContext__WEBPACK_IMPORTED_MODULE_1__.Gu.Provider,{value:v},!w||M?f:null)}},"./nodes/ImageComponent.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{RIGHT_CLICK_IMAGE_COMMAND:()=>RIGHT_CLICK_IMAGE_COMMAND,default:()=>ImageComponent});var LexicalAutoFocusPlugin_prod=__webpack_require__("../node_modules/.pnpm/@lexical+react@0.15.0_react-dom@18.3.1_react@18.3.1_yjs@13.6.15/node_modules/@lexical/react/LexicalAutoFocusPlugin.prod.mjs"),LexicalCollaborationContext_prod=__webpack_require__("../node_modules/.pnpm/@lexical+react@0.15.0_react-dom@18.3.1_react@18.3.1_yjs@13.6.15/node_modules/@lexical/react/LexicalCollaborationContext.prod.mjs"),LexicalCollaborationPlugin_prod=__webpack_require__("../node_modules/.pnpm/@lexical+react@0.15.0_react-dom@18.3.1_react@18.3.1_yjs@13.6.15/node_modules/@lexical/react/LexicalCollaborationPlugin.prod.mjs"),LexicalComposerContext_prod=__webpack_require__("../node_modules/.pnpm/@lexical+react@0.15.0_react-dom@18.3.1_react@18.3.1_yjs@13.6.15/node_modules/@lexical/react/LexicalComposerContext.prod.mjs"),LexicalErrorBoundary_prod=__webpack_require__("../node_modules/.pnpm/@lexical+react@0.15.0_react-dom@18.3.1_react@18.3.1_yjs@13.6.15/node_modules/@lexical/react/LexicalErrorBoundary.prod.mjs"),LexicalHashtagPlugin_prod=__webpack_require__("../node_modules/.pnpm/@lexical+react@0.15.0_react-dom@18.3.1_react@18.3.1_yjs@13.6.15/node_modules/@lexical/react/LexicalHashtagPlugin.prod.mjs"),LexicalHistoryPlugin_prod=__webpack_require__("../node_modules/.pnpm/@lexical+react@0.15.0_react-dom@18.3.1_react@18.3.1_yjs@13.6.15/node_modules/@lexical/react/LexicalHistoryPlugin.prod.mjs"),LexicalNestedComposer_prod=__webpack_require__("../node_modules/.pnpm/@lexical+react@0.15.0_react-dom@18.3.1_react@18.3.1_yjs@13.6.15/node_modules/@lexical/react/LexicalNestedComposer.prod.mjs"),LexicalRichTextPlugin_prod=__webpack_require__("../node_modules/.pnpm/@lexical+react@0.15.0_react-dom@18.3.1_react@18.3.1_yjs@13.6.15/node_modules/@lexical/react/LexicalRichTextPlugin.prod.mjs"),useLexicalNodeSelection_prod=__webpack_require__("../node_modules/.pnpm/@lexical+react@0.15.0_react-dom@18.3.1_react@18.3.1_yjs@13.6.15/node_modules/@lexical/react/useLexicalNodeSelection.prod.mjs"),LexicalUtils_prod=__webpack_require__("../node_modules/.pnpm/@lexical+utils@0.15.0/node_modules/@lexical/utils/LexicalUtils.prod.mjs"),Lexical_prod=__webpack_require__("../node_modules/.pnpm/lexical@0.15.0/node_modules/lexical/Lexical.prod.mjs"),react=__webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");const image_broken_namespaceObject=__webpack_require__.p+"static/media/image-broken.03e94dc5.svg";var collaboration=__webpack_require__("./collaboration.ts"),SettingsContext=__webpack_require__("./context/SettingsContext.tsx"),SharedHistoryContext=__webpack_require__("./context/SharedHistoryContext.tsx"),EmojisPlugin=__webpack_require__("./plugins/EmojisPlugin/index.ts"),KeywordsPlugin=__webpack_require__("./plugins/KeywordsPlugin/index.ts"),LinkPlugin=__webpack_require__("./plugins/LinkPlugin/index.tsx"),MentionsPlugin=__webpack_require__("./plugins/MentionsPlugin/index.tsx"),TreeViewPlugin=__webpack_require__("./plugins/TreeViewPlugin/index.tsx"),ContentEditable=__webpack_require__("./ui/ContentEditable.tsx"),ImageResizer=__webpack_require__("./ui/ImageResizer.tsx"),Placeholder=__webpack_require__("./ui/Placeholder.tsx"),ImageNode=__webpack_require__("./nodes/ImageNode.tsx"),injectStylesIntoStyleTag=__webpack_require__("../node_modules/.pnpm/style-loader@3.3.4_webpack@5.91.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("../node_modules/.pnpm/style-loader@3.3.4_webpack@5.91.0/node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("../node_modules/.pnpm/style-loader@3.3.4_webpack@5.91.0/node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("../node_modules/.pnpm/style-loader@3.3.4_webpack@5.91.0/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("../node_modules/.pnpm/style-loader@3.3.4_webpack@5.91.0/node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("../node_modules/.pnpm/style-loader@3.3.4_webpack@5.91.0/node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),cjs_js_nodes_ImageNode=__webpack_require__("../node_modules/.pnpm/css-loader@6.11.0_webpack@5.91.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[6].use[1]!../node_modules/.pnpm/mini-css-extract-plugin@2.9.0_webpack@5.91.0/node_modules/mini-css-extract-plugin/dist/loader.js!../node_modules/.pnpm/css-loader@7.1.2_webpack@5.91.0/node_modules/css-loader/dist/cjs.js!./nodes/ImageNode.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(cjs_js_nodes_ImageNode.A,options);cjs_js_nodes_ImageNode.A&&cjs_js_nodes_ImageNode.A.locals&&cjs_js_nodes_ImageNode.A.locals;const imageCache=new Set,RIGHT_CLICK_IMAGE_COMMAND=(0,Lexical_prod.gu)("RIGHT_CLICK_IMAGE_COMMAND");function LazyImage(_ref){let{className,altText,height,imageRef,maxWidth,onError,src,width}=_ref;return function useSuspenseImage(src){if(!imageCache.has(src))throw new Promise((resolve=>{const img=new Image;img.src=src,img.onload=()=>{imageCache.add(src),resolve(null)},img.onerror=()=>{imageCache.add(src)}}))}(src),react.createElement("img",{style:{height,maxWidth,width},alt:altText,className:className||void 0,draggable:"false",onError,ref:imageRef,src})}function BrokenImage(){return react.createElement("img",{style:{height:200,opacity:.2,width:200},draggable:"false",src:image_broken_namespaceObject})}function ImageComponent(_ref2){let{altText,caption,captionsEnabled,height,maxWidth,nodeKey,resizable,showCaption,src,width}=_ref2;const imageRef=(0,react.useRef)(null),buttonRef=(0,react.useRef)(null),[isSelected,setSelected,clearSelection]=(0,useLexicalNodeSelection_prod.Y)(nodeKey),[isResizing,setIsResizing]=(0,react.useState)(!1),{isCollabActive}=(0,LexicalCollaborationContext_prod.k)(),[editor]=(0,LexicalComposerContext_prod.DF)(),[selection,setSelection]=(0,react.useState)(null),activeEditorRef=(0,react.useRef)(null),[isLoadError,setIsLoadError]=(0,react.useState)(!1),$onDelete=(0,react.useCallback)((payload=>{if(isSelected&&(0,Lexical_prod.RT)((0,Lexical_prod.vJ)())){payload.preventDefault();const node=(0,Lexical_prod.ns)(nodeKey);if((0,ImageNode.Eh)(node))return node.remove(),!0}return!1}),[isSelected,nodeKey]),$onEnter=(0,react.useCallback)((event=>{const latestSelection=(0,Lexical_prod.vJ)(),buttonElem=buttonRef.current;if(isSelected&&(0,Lexical_prod.RT)(latestSelection)&&1===latestSelection.getNodes().length){if(showCaption)return(0,Lexical_prod.n1)(null),event.preventDefault(),caption.focus(),!0;if(null!==buttonElem&&buttonElem!==document.activeElement)return event.preventDefault(),buttonElem.focus(),!0}return!1}),[caption,isSelected,showCaption]),$onEscape=(0,react.useCallback)((event=>(activeEditorRef.current===caption||buttonRef.current===event.target)&&((0,Lexical_prod.n1)(null),editor.update((()=>{setSelected(!0);const parentRootElement=editor.getRootElement();null!==parentRootElement&&parentRootElement.focus()})),!0)),[caption,editor,setSelected]),onClick=(0,react.useCallback)((payload=>{const event=payload;return!!isResizing||event.target===imageRef.current&&(event.shiftKey?setSelected(!isSelected):(clearSelection(),setSelected(!0)),!0)}),[isResizing,isSelected,setSelected,clearSelection]),onRightClick=(0,react.useCallback)((event=>{editor.getEditorState().read((()=>{const latestSelection=(0,Lexical_prod.vJ)();"IMG"===event.target.tagName&&(0,Lexical_prod.I2)(latestSelection)&&1===latestSelection.getNodes().length&&editor.dispatchCommand(RIGHT_CLICK_IMAGE_COMMAND,event)}))}),[editor]);(0,react.useEffect)((()=>{let isMounted=!0;const rootElement=editor.getRootElement(),unregister=(0,LexicalUtils_prod.Sd)(editor.registerUpdateListener((_ref3=>{let{editorState}=_ref3;isMounted&&setSelection(editorState.read((()=>(0,Lexical_prod.vJ)())))})),editor.registerCommand(Lexical_prod.Mv,((_,activeEditor)=>(activeEditorRef.current=activeEditor,!1)),Lexical_prod.Ac),editor.registerCommand(Lexical_prod.d8,onClick,Lexical_prod.Ac),editor.registerCommand(RIGHT_CLICK_IMAGE_COMMAND,onClick,Lexical_prod.Ac),editor.registerCommand(Lexical_prod.Tg,(event=>event.target===imageRef.current&&(event.preventDefault(),!0)),Lexical_prod.Ac),editor.registerCommand(Lexical_prod.w$,$onDelete,Lexical_prod.Ac),editor.registerCommand(Lexical_prod.gC,$onDelete,Lexical_prod.Ac),editor.registerCommand(Lexical_prod.if,$onEnter,Lexical_prod.Ac),editor.registerCommand(Lexical_prod.Q$,$onEscape,Lexical_prod.Ac));return rootElement?.addEventListener("contextmenu",onRightClick),()=>{isMounted=!1,unregister(),rootElement?.removeEventListener("contextmenu",onRightClick)}}),[clearSelection,editor,isResizing,isSelected,nodeKey,$onDelete,$onEnter,$onEscape,onClick,onRightClick,setSelected]);const{historyState}=(0,SharedHistoryContext.O)(),{settings:{showNestedEditorTreeView}}=(0,SettingsContext.t)(),draggable=isSelected&&(0,Lexical_prod.RT)(selection)&&!isResizing,isFocused=isSelected||isResizing;return react.createElement(react.Suspense,{fallback:null},react.createElement(react.Fragment,null,react.createElement("div",{draggable},isLoadError?react.createElement(BrokenImage,null):react.createElement(LazyImage,{altText,className:isFocused?"focused "+((0,Lexical_prod.RT)(selection)?"draggable":""):null,height,imageRef,maxWidth,onError:()=>setIsLoadError(!0),src,width})),showCaption&&react.createElement("div",{className:"image-caption-container"},react.createElement(LexicalNestedComposer_prod.s,{initialEditor:caption},react.createElement(LexicalAutoFocusPlugin_prod.x,null),react.createElement(MentionsPlugin.A,null),react.createElement(LinkPlugin.A,null),react.createElement(EmojisPlugin.A,null),react.createElement(LexicalHashtagPlugin_prod.E,null),react.createElement(KeywordsPlugin.A,null),isCollabActive?react.createElement(LexicalCollaborationPlugin_prod.V,{id:caption.getKey(),providerFactory:collaboration.f,shouldBootstrap:!0}):react.createElement(LexicalHistoryPlugin_prod.G,{externalHistoryState:historyState}),react.createElement(LexicalRichTextPlugin_prod.$,{contentEditable:react.createElement(ContentEditable.A,{className:"ImageNode__contentEditable"}),ErrorBoundary:LexicalErrorBoundary_prod.A,placeholder:react.createElement(Placeholder.A,{className:"ImageNode__placeholder"},"Enter a caption...")}),!0===showNestedEditorTreeView?react.createElement(TreeViewPlugin.A,null):null)),resizable&&(0,Lexical_prod.RT)(selection)&&isFocused&&react.createElement(ImageResizer.A,{buttonRef,captionsEnabled:!isLoadError&&captionsEnabled,editor,imageRef,maxWidth,onResizeEnd:(nextWidth,nextHeight)=>{setTimeout((()=>{setIsResizing(!1)}),200),editor.update((()=>{const node=(0,Lexical_prod.ns)(nodeKey);(0,ImageNode.Eh)(node)&&node.setWidthAndHeight(nextWidth,nextHeight)}))},onResizeStart:()=>{setIsResizing(!0)},setShowCaption:()=>{editor.update((()=>{const node=(0,Lexical_prod.ns)(nodeKey);(0,ImageNode.Eh)(node)&&node.setShowCaption(!0)}))},showCaption})))}try{ImageComponent.displayName="ImageComponent",ImageComponent.__docgenInfo={description:"",displayName:"ImageComponent",props:{altText:{defaultValue:null,description:"",name:"altText",required:!0,type:{name:"string"}},caption:{defaultValue:null,description:"",name:"caption",required:!0,type:{name:"LexicalEditor"}},captionsEnabled:{defaultValue:null,description:"",name:"captionsEnabled",required:!0,type:{name:"boolean"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:'number | "inherit"'}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!0,type:{name:"number"}},nodeKey:{defaultValue:null,description:"",name:"nodeKey",required:!0,type:{name:"string"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!0,type:{name:"boolean"}},showCaption:{defaultValue:null,description:"",name:"showCaption",required:!0,type:{name:"boolean"}},src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:'number | "inherit"'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/nodes/ImageComponent.tsx#ImageComponent"]={docgenInfo:ImageComponent.__docgenInfo,name:"ImageComponent",path:"src/nodes/ImageComponent.tsx#ImageComponent"})}catch(__react_docgen_typescript_loader_error){}},"./ui/ImageResizer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ImageResizer});var _lexical_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../node_modules/.pnpm/@lexical+utils@0.15.0/node_modules/@lexical/utils/LexicalUtils.prod.mjs"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");function clamp(value,min,max){return Math.min(Math.max(value,min),max)}const Direction={east:1,north:8,south:2,west:4};function ImageResizer(_ref){let{buttonRef,captionsEnabled,editor,imageRef,maxWidth,onResizeEnd,onResizeStart,setShowCaption,showCaption}=_ref;const controlWrapperRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),userSelect=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({priority:"",value:"default"}),positioningRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({currentHeight:0,currentWidth:0,direction:0,isResizing:!1,ratio:0,startHeight:0,startWidth:0,startX:0,startY:0}),editorRootElement=editor.getRootElement(),maxWidthContainer=maxWidth||(null!==editorRootElement?editorRootElement.getBoundingClientRect().width-20:100),maxHeightContainer=null!==editorRootElement?editorRootElement.getBoundingClientRect().height-20:100,handlePointerDown=(event,direction)=>{if(!editor.isEditable())return;const image=imageRef.current,controlWrapper=controlWrapperRef.current;if(null!==image&&null!==controlWrapper){event.preventDefault();const{height,width}=image.getBoundingClientRect(),zoom=(0,_lexical_utils__WEBPACK_IMPORTED_MODULE_1__.OV)(image),positioning=positioningRef.current;positioning.startWidth=width,positioning.startHeight=height,positioning.ratio=width/height,positioning.currentWidth=width,positioning.currentHeight=height,positioning.startX=event.clientX/zoom,positioning.startY=event.clientY/zoom,positioning.isResizing=!0,positioning.direction=direction,(direction=>{const ew=direction===Direction.east||direction===Direction.west,ns=direction===Direction.north||direction===Direction.south,nwse=direction&Direction.north&&direction&Direction.west||direction&Direction.south&&direction&Direction.east,cursorDir=ew?"ew":ns?"ns":nwse?"nwse":"nesw";null!==editorRootElement&&editorRootElement.style.setProperty("cursor",`${cursorDir}-resize`,"important"),null!==document.body&&(document.body.style.setProperty("cursor",`${cursorDir}-resize`,"important"),userSelect.current.value=document.body.style.getPropertyValue("-webkit-user-select"),userSelect.current.priority=document.body.style.getPropertyPriority("-webkit-user-select"),document.body.style.setProperty("-webkit-user-select","none","important"))})(direction),onResizeStart(),controlWrapper.classList.add("image-control-wrapper--resizing"),image.style.height=`${height}px`,image.style.width=`${width}px`,document.addEventListener("pointermove",handlePointerMove),document.addEventListener("pointerup",handlePointerUp)}},handlePointerMove=event=>{const image=imageRef.current,positioning=positioningRef.current,isHorizontal=positioning.direction&(Direction.east|Direction.west),isVertical=positioning.direction&(Direction.south|Direction.north);if(null!==image&&positioning.isResizing){const zoom=(0,_lexical_utils__WEBPACK_IMPORTED_MODULE_1__.OV)(image);if(isHorizontal&&isVertical){let diff=Math.floor(positioning.startX-event.clientX/zoom);diff=positioning.direction&Direction.east?-diff:diff;const width=clamp(positioning.startWidth+diff,100,maxWidthContainer),height=width/positioning.ratio;image.style.width=`${width}px`,image.style.height=`${height}px`,positioning.currentHeight=height,positioning.currentWidth=width}else if(isVertical){let diff=Math.floor(positioning.startY-event.clientY/zoom);diff=positioning.direction&Direction.south?-diff:diff;const height=clamp(positioning.startHeight+diff,100,maxHeightContainer);image.style.height=`${height}px`,positioning.currentHeight=height}else{let diff=Math.floor(positioning.startX-event.clientX/zoom);diff=positioning.direction&Direction.east?-diff:diff;const width=clamp(positioning.startWidth+diff,100,maxWidthContainer);image.style.width=`${width}px`,positioning.currentWidth=width}}},handlePointerUp=()=>{const image=imageRef.current,positioning=positioningRef.current,controlWrapper=controlWrapperRef.current;if(null!==image&&null!==controlWrapper&&positioning.isResizing){const width=positioning.currentWidth,height=positioning.currentHeight;positioning.startWidth=0,positioning.startHeight=0,positioning.ratio=0,positioning.startX=0,positioning.startY=0,positioning.currentWidth=0,positioning.currentHeight=0,positioning.isResizing=!1,controlWrapper.classList.remove("image-control-wrapper--resizing"),null!==editorRootElement&&editorRootElement.style.setProperty("cursor","text"),null!==document.body&&(document.body.style.setProperty("cursor","default"),document.body.style.setProperty("-webkit-user-select",userSelect.current.value,userSelect.current.priority)),onResizeEnd(width,height),document.removeEventListener("pointermove",handlePointerMove),document.removeEventListener("pointerup",handlePointerUp)}};return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{ref:controlWrapperRef},!showCaption&&captionsEnabled&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{onClick:()=>{setShowCaption(!showCaption)},className:"image-caption-button",ref:buttonRef},"Add Caption"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{onPointerDown:event=>{handlePointerDown(event,Direction.north)},className:"image-resizer image-resizer-n"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{onPointerDown:event=>{handlePointerDown(event,Direction.north|Direction.east)},className:"image-resizer image-resizer-ne"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{onPointerDown:event=>{handlePointerDown(event,Direction.east)},className:"image-resizer image-resizer-e"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{onPointerDown:event=>{handlePointerDown(event,Direction.south|Direction.east)},className:"image-resizer image-resizer-se"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{onPointerDown:event=>{handlePointerDown(event,Direction.south)},className:"image-resizer image-resizer-s"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{onPointerDown:event=>{handlePointerDown(event,Direction.south|Direction.west)},className:"image-resizer image-resizer-sw"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{onPointerDown:event=>{handlePointerDown(event,Direction.west)},className:"image-resizer image-resizer-w"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{onPointerDown:event=>{handlePointerDown(event,Direction.north|Direction.west)},className:"image-resizer image-resizer-nw"}))}try{ImageResizer.displayName="ImageResizer",ImageResizer.__docgenInfo={description:"",displayName:"ImageResizer",props:{buttonRef:{defaultValue:null,description:"",name:"buttonRef",required:!0,type:{name:"{ current: HTMLButtonElement | null; }"}},captionsEnabled:{defaultValue:null,description:"",name:"captionsEnabled",required:!0,type:{name:"boolean"}},editor:{defaultValue:null,description:"",name:"editor",required:!0,type:{name:"LexicalEditor"}},imageRef:{defaultValue:null,description:"",name:"imageRef",required:!0,type:{name:"{ current: HTMLElement | null; }"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"number"}},onResizeEnd:{defaultValue:null,description:"",name:"onResizeEnd",required:!0,type:{name:'(width: number | "inherit", height: number | "inherit") => void'}},onResizeStart:{defaultValue:null,description:"",name:"onResizeStart",required:!0,type:{name:"() => void"}},setShowCaption:{defaultValue:null,description:"",name:"setShowCaption",required:!0,type:{name:"(show: boolean) => void"}},showCaption:{defaultValue:null,description:"",name:"showCaption",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui/ImageResizer.tsx#ImageResizer"]={docgenInfo:ImageResizer.__docgenInfo,name:"ImageResizer",path:"src/ui/ImageResizer.tsx#ImageResizer"})}catch(__react_docgen_typescript_loader_error){}},"../node_modules/.pnpm/css-loader@6.11.0_webpack@5.91.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[6].use[1]!../node_modules/.pnpm/mini-css-extract-plugin@2.9.0_webpack@5.91.0/node_modules/mini-css-extract-plugin/dist/loader.js!../node_modules/.pnpm/css-loader@7.1.2_webpack@5.91.0/node_modules/css-loader/dist/cjs.js!./nodes/ImageNode.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_pnpm_css_loader_6_11_0_webpack_5_91_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/.pnpm/css-loader@6.11.0_webpack@5.91.0/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_pnpm_css_loader_6_11_0_webpack_5_91_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_css_loader_6_11_0_webpack_5_91_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_6_11_0_webpack_5_91_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../node_modules/.pnpm/css-loader@6.11.0_webpack@5.91.0/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_pnpm_css_loader_6_11_0_webpack_5_91_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_pnpm_css_loader_6_11_0_webpack_5_91_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"// extracted by mini-css-extract-plugin\nexport {};","",{version:3,sources:["webpack://./nodes/ImageNode.css"],names:[],mappings:"AAAA;QACQ,CAAA",sourcesContent:["// extracted by mini-css-extract-plugin\nexport {};"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);